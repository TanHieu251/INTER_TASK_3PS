<div class="mx-6">
  <kendo-grid
    [data]="filterCheckedQuestionBank()"
    [data]="gridView"
    [data]="getSearchTextQuestionBank()"
    [pageSize]="pageSize"
    [skip]="skip"
    [pageable]="true"
    (pageChange)="pageChange($event)"
    kendoGridSelectBy="id"
    [(selectedKeys)]="mySelection"
    class="myCustomGrid"
  >
    <kendo-grid-column-group [columnMenu]="false">
      <kendo-grid-checkbox-column
        field="selected"
        [width]="30"
        [headerClass]="{ 'text-center': true }"
        [class]="{ 'text-center': true }"
        [resizable]="false"
        [columnMenu]="false"
        [showSelectAll]="true"
      ></kendo-grid-checkbox-column>

      <kendo-grid-column
        [style]="{ 'text-align': 'left' }"
        [headerStyle]="{ 'text-align': 'left' }"
        field="title"
        title="Câu hỏi"
        [width]="780"
        [scrollTop]="50"
        class="title-column"
      >
        <ng-template kendoGridCellTemplate let-dataItem>
          <div>
            <h3>{{ dataItem.title }}</h3>
          </div>
          <div *ngIf="dataItem.code && dataItem.typeQuestion">
            <div class="flex gap-5">
              <span class="code">{{ dataItem.code }}</span>
              <span class="border-l-2"></span>
              <span class="type">{{ dataItem.typeQuestion }}</span>
            </div>
          </div>
          <div *ngIf="dataItem.code && !dataItem.typeQuestion">
            <div class="flex gap-5">
              <span class="code">{{ dataItem.code }}</span>
            </div>
          </div>
          <div *ngIf="!dataItem.code && dataItem.typeQuestion">
            <div class="flex gap-5">
              <span class="type">{{ dataItem.typeQuestion }}</span>
            </div>
          </div>
        </ng-template>
      </kendo-grid-column>

      <kendo-grid-column
        [style]="{
          'text-align': 'left',
          
        }"
        [headerStyle]="{ 'text-align': 'left' }"
        field="group"
        title="Phân nhóm"
        [width]="280"
      >
      </kendo-grid-column>
      <kendo-grid-column
        [headerStyle]="{ 'text-align': 'center' }"
        [style]="{ 'text-align': 'center' }"
        field="time"
        title="Thời gian làm "
        [width]="160"
      >
        <ng-template kendoGridCellTemplate let-dataItem>
          <span>{{ dataItem.time }}s</span>
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column
        [headerStyle]="{ 'text-align': 'center' }"
        [style]="{ 'text-align': 'center', 'font-weight': '500' }"
        field="status"
        title="Tình trạng"
        [width]="240"
      >
        <ng-template kendoGridCellTemplate let-dataItem>
          <span [style.color]="getStatusColor(dataItem.status)">
            {{ getStatusText(dataItem.status) }}</span
          >
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column
        [width]="50"
        class="kendo-openPopup"
        [style]="{
          'display:': 'flex',
          'border-left': '1px solid ',
          'text-align ': 'center',
          'justify-content': 'center',
          
        }"
      >
        <ng-template kendoGridCellTemplate let-dataItem>
          <!-- <button #anchor (click)="checkStatus(dataItem.status)">...</button> -->
          <div class="w-[40px] h-[58px] items-center flex justify-center">
            <button
              class="text-black hover:bg-gray-400 hover:text-white px-3 py-1"
              kendoButton
              #anchor
              (click)="toggleAndCheck(dataItem, anchor)"
            >
              ...
            </button>
          </div>
        </ng-template>
      </kendo-grid-column>
    </kendo-grid-column-group>
    <ng-template
      kendoPagerTemplate
      let-totalPages="totalPages"
      let-currentPage="currentPage"
    >
      Hiển thị<span class="moitrang"> mỗi trang </span>
      <kendo-pager-page-sizes [pageSizes]="[pageSize]"></kendo-pager-page-sizes>
      <kendo-pager-prev-buttons
        class="k-pager-nav-btn"
      ></kendo-pager-prev-buttons>
      <kendo-pager-numeric-buttons
        [buttonCount]="4"
      ></kendo-pager-numeric-buttons>
      <kendo-pager-next-buttons
        class="k-pager-nav-btn"
      ></kendo-pager-next-buttons>
    </ng-template>
  </kendo-grid>
  <kendo-dialog
    class="myDialog"
    title="Xóa câu hỏi"
    *ngIf="dialogDelete"
    (close)="close('cancel')"
    [minWidth]="250"
    [width]="450"
  >
    <div class="flex flex-col justify-center items-center py-5">
      <p>Bạn chắc chắn muốn xóa phân nhóm</p>
      <p>Hệ thống cửa hàng Hachi</p>
      <p>Hachi có mặt từ năm nào?</p>
    </div>
    <div class="flex justify-center items-center py-5">
      <p>Đơn vị xóa sẽ <span>KHÔNG</span> thể khôi phục lại</p>
    </div>
    <kendo-dialog-actions class="buttonDialog">
      <button kendoButton (click)="close('no')">KHÔNG XÓA</button>
      <button kendoButton (click)="close('yes')" themeColor="primary">
        XÓA
      </button>
    </kendo-dialog-actions>
  </kendo-dialog>
  <kendo-popup
    [anchor]="anchor"
    (anchorViewportLeave)="show = false"
    *ngIf="show"
    class="my-popup"
  >
    <div
      class="bg-gray-400 text-white font-normal w-[150px] relative left-[-73px] top-[-35px]"
    >
      <button
        *ngFor="let func of currentFunctions"
        class="w-full h-[50px] text-white"
        (click)="handleButton(selectedQuestion, func.name)"
      >
        {{ func.name }}
      </button>
    </div>
  </kendo-popup>
</div>
